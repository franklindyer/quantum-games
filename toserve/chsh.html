<!DOCTYPE html>
<html>
<head>

<script>
  let sock = null;

  function showGameMsg(data) {
      console.log("showGameMsg called!");
      let listEl = document.createElement('li');
      listEl.appendChild(document.createTextNode(data.message));
      document.getElementById("game-messages").appendChild(listEl);
  }

  let serverMessageHandler = showGameMsg;
</script>
    
</head>

<body>

<h1>Classical CHSH game</h1>
<p>Picture this: you and your friend are playing a game. Each of you receives a random bit from the game's mediator, chosen by a coin flip. Then, without communicating, each of you must chose a bit to give back to the mediator. The rules are simple - you win the game if and only if you chose the same bit, <i>unless</i> the mediator gave you both 1s, in which case you win if and only if you chose different bits.</p>

<button type="button" class="pregame" onclick="sock = newGame('chsh')">New game</button><br/>

<button type="button" class="pregame" onclick="sock = joinGame(document.getElementById('gameidField').value)">Join game</button>
<input type="text" id="gameidField" class="pregame" placeholder="Game ID"></input>

<ul id = "server-messages">
</ul>

<button type="button" class="ingame" onclick="sendGameMessage(sock, {choice: 0})">Choose 0</button>
<button type="button" class="ingame" onclick="sendGameMessage(sock, {choice: 1})">Choose 1</button>

<ul id="game-messages">
</ul>

<script src="/client.js" type="text/javascript"></script>

</body>
</html>
